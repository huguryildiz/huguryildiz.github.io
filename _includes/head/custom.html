{% include base_path %}

<!-- start custom head snippets -->

<!-- =========================
     Stylesheets (after theme)
     ========================= -->
<link rel="stylesheet" href="{{ '/assets/css/custom.css' | relative_url }}">
<link rel="stylesheet" href="{{ '/assets/css/supervision-stats.css' | relative_url }}">
<link rel="stylesheet" href="{{ '/assets/css/pub-chart.css' | relative_url }}">

<!-- =========================
     Scripts
     ========================= -->
<script defer src="{{ '/assets/js/pub-chart.js' | relative_url }}"></script>

<!-- =========================
     Academicons
     (Local + CDN fallback)
     ========================= -->
<link rel="stylesheet" href="{{ base_path }}/assets/css/academicons.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/jpswalsh/academicons@1/css/academicons.min.css">

<!-- =========================
     Favicons (single source)
     ========================= -->
<link rel="icon" href="{{ '/images/favicons/favicon.ico?v=3' | relative_url }}">
<link rel="icon" type="image/svg+xml" href="{{ '/images/favicons/favicon.svg?v=3' | relative_url }}">
<link rel="apple-touch-icon" href="{{ '/images/favicons/apple-touch-icon.png?v=3' | relative_url }}">

<!-- =========================
     Mobile UI color
     ========================= -->
<meta name="theme-color" content="#061a2b">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

<!-- =========================
     Fonts
     ========================= -->
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Lora:wght@400;500;600;700&display=swap" rel="stylesheet">

<!-- =========================
     GoatCounter analytics
     ========================= -->
<script data-goatcounter="https://huguryildiz.goatcounter.com/count"
        async src="//gc.zgo.at/count.js"></script>

<!-- =========================================================
     Mobile nav fix:
     Put ALL menu items under hamburger on mobile
     - Greedy-nav only moves "overflow" items by default
     - This clones all visible links into hidden (hamburger) links
     ========================================================= -->
<script>
(function () {
  function norm(h){ return (h || "").trim().replace(/\/+$/, ""); }

  function buildHamburger() {
    if (window.matchMedia("(min-width: 769px)").matches) return;

    var nav = document.querySelector(".greedy-nav");
    if (!nav) return;

    var hidden  = nav.querySelector(".hidden-links");
    if (!hidden) return;

    // Nav içindeki TÜM menü item'larını yakala (visible+hidden fark etmez)
    var allAnchors = Array.from(nav.querySelectorAll(".visible-links a, .hidden-links a"))
      .filter(a => a && a.getAttribute("href"));

    var seen = new Set();
    var items = [];

    allAnchors.forEach(function(a){
      var href = norm(a.getAttribute("href"));
      if (!href || seen.has(href)) return;
      seen.add(href);

      var li = document.createElement("li");
      li.className = "masthead__menu-item";
      li.appendChild(a.cloneNode(true));
      items.push(li);
    });

    // Hidden'ı yeniden yaz
    hidden.innerHTML = "";
    items.forEach(li => hidden.appendChild(li));

    // CV'yi GARANTİ et (son çare)
    var hasCV = hidden.querySelector('a[href$="/cv/"], a[href$="/cv"]');
    if (!hasCV) {
      var li = document.createElement("li");
      li.className = "masthead__menu-item";
      li.innerHTML = '<a href="/cv/">CV</a>';
      hidden.insertBefore(li, hidden.firstChild);
    }
  }

  function init() {
    buildHamburger();

    // Greedy-nav / font yüklenmesi sonrası tekrar dene
    setTimeout(buildHamburger, 200);
    setTimeout(buildHamburger, 800);

    // Menü DOM'u değişirse yeniden kur (SIRA değişse bile bozulmaz)
    var nav = document.querySelector(".greedy-nav");
    if (!nav) return;

    var obs = new MutationObserver(function(){
      buildHamburger();
    });

    obs.observe(nav, { childList: true, subtree: true });
    window.addEventListener("resize", function(){ setTimeout(buildHamburger, 150); });
  }

  window.addEventListener("load", init);
})();
</script>
<!-- end custom head snippets -->