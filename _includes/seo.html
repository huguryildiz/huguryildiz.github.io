{% include base_path %}

{% assign seo_url = site.url | append: site.baseurl %}
{% assign canonical_url = page.url | replace: "index.html", "" | prepend: seo_url %}

{% assign clean_site_title = site.title | strip %}
{% assign clean_page_title = page.title | strip %}

{% if clean_page_title and clean_page_title != "" %}
  {% assign seo_title = clean_page_title | append: " " | append: site.title_separator | append: " " | append: clean_site_title %}
{% else %}
  {% assign seo_title = clean_site_title %}
{% endif %}

{% assign seo_description = page.description | default: page.excerpt | default: site.description %}
{% if seo_description %}
  {% assign seo_description = seo_description | markdownify | strip_html | strip_newlines | escape_once %}
{% endif %}

<!-- ========================================= -->
<!-- Title -->
<!-- ========================================= -->
<title>{{ seo_title }}</title>
<meta name="description" content="{{ seo_description }}">

<link rel="canonical" href="{{ canonical_url }}">

<!-- ========================================= -->
<!-- Open Graph (Facebook / LinkedIn) -->
<!-- ========================================= -->
<meta property="og:type" content="{% if page.date %}article{% else %}website{% endif %}">
<meta property="og:locale" content="{{ site.locale }}">
<meta property="og:site_name" content="{{ clean_site_title }}">
<meta property="og:title" content="{{ seo_title }}">
<meta property="og:description" content="{{ seo_description }}">
<meta property="og:url" content="{{ canonical_url }}">

{% if page.header.image %}
  <meta property="og:image" content="{{ page.header.image | prepend: base_path }}">
{% elsif site.og_image %}
  <meta property="og:image" content="{{ site.og_image | prepend: base_path }}">
{% endif %}

<!-- ========================================= -->
<!-- Twitter -->
<!-- ========================================= -->
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:title" content="{{ seo_title }}">
<meta name="twitter:description" content="{{ seo_description }}">
<meta name="twitter:url" content="{{ canonical_url }}">

{% if page.header.image %}
  <meta name="twitter:image" content="{{ page.header.image | prepend: base_path }}">
{% elsif site.og_image %}
  <meta name="twitter:image" content="{{ site.og_image | prepend: base_path }}">
{% endif %}

<!-- ========================================= -->
<!-- Structured Data (Academic Optimized) -->
<!-- ========================================= -->
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "Person",
  "name": "{{ site.author.name }}",
  "url": "{{ seo_url }}",
  "jobTitle": "Associate Professor of Electrical Engineering",
  "affiliation": {
    "@type": "Organization",
    "name": "{{ site.author.employer }}"
  },
  "sameAs": [
    "{{ site.author.googlescholar }}",
    "{{ site.author.orcid }}",
    "https://github.com/{{ site.author.github }}",
    "https://linkedin.com/in/{{ site.author.linkedin }}"
  ]
}
</script>